package nlp.a1
import nlpclass._

class ProbabilityDistribution[B] (c: Map[B,Int], lambda: Double = 0.0) extends ProbabilityDistributionToImplement[B] {

	def apply(x: B): Double = {
		var count = c.getOrElse(x,1)*1.0
		if(count == 0)
			count = count + lambda
		var total = 0.0
		c foreach { case (k,v) => total = total + v}
		count/(total+(lambda*c.size))
	}

	def sample: B = {
		val r = scala.util.Random.nextDouble()
		var sum = 0.0
		var total = 0.0
		c foreach { case (k,v) => total = total + v}
		for((k,v) <- c) {
			sum += v/total
			if(sum > r) 
				return k
		}
		sys.error("Could not return")
	}
}




